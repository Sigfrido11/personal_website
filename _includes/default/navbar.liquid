<header class="site-header">

    <!-- Logo and title -->
	<div class="branding">
        {% if site.avatar %}
		<a href="{{ '/' | relative_url }}">
			<img alt="logo img" class="avatar" src="{{ site.avatar | relative_url }}" loading="lazy"/>
		</a>
        {% endif %}
        <a class="site-title" aria-label="{{ site.title }}" href="{{ '/' | relative_url }}">
        {{ site.title }}
		</a>
	</div>

    <!-- Toggle menu -->
    <nav class="clear">
    <a aria-label="pull" id="pull" class="toggle" href="#">
    <i class="fas fa-bars fa-lg"></i>
    </a>

    <!-- Menu -->
    <ul class="hide">
        {% assign name_page = "" %}
        {% assign emptyArray = '' | split: '' %}
        {% assign menus = site.data.menu | default: emptyArray %}
        {% assign pages = site.pages | concat: menus | sort: 'position' %}
        {% for page in pages %}
        {% unless page.title == null or page.hide or name_page contains page.title %}
            <li class="separator"> | </li>
            <li>
                <a class="clear" aria-label="{{ page.title }}" title="{{ page.title }}" href="{{ page.url | relative_url }}">
                    {% if page.icon %} <i class="navbar-icon fas {{ page.icon }}" aria-hidden="true"></i>{% endif %}
                    <span class="navbar-label {% if page.icon %}navbar-label-with-icon{% endif%}" data-i18n-original="{{ page.title }}">{{ page.title }}</span>
                </a>
            </li>
        {% endunless %}
        {% assign name_page = page.title | append: name_page %}
        {% endfor %}

        <li class="separator"> | </li>
        <li><a id="lang-toggle" title="Switch language" aria-label="Switch language" onclick="toggleLanguage(event)" href="#"></a></li>

        {% if site.color_theme == 'auto' %}
        <li class="separator"> | </li>
        <li><a id="theme-toggle" title="{{ page.title }} " aria-label="{{ page.title }}" onclick="themeToggle()"></a></li>
        {% endif %}
    </ul>

	</nav>
</header>

<script>
  (function () {
    const lightSrc = "{{ '/assets/img/home_whbk.png' | relative_url }}";
    const darkSrc  = "{{ '/assets/img/home_bkbk.png'  | relative_url }}";
    const avatarSelector = '.avatar';

    function setAvatar() {
      const img = document.querySelector(avatarSelector);
      if (!img) return;
      const theme = document.documentElement.getAttribute('data-theme') || 'light';
      img.src = theme === 'dark' ? darkSrc : lightSrc;
    }

    // Hook themeToggle if present
    if (window.themeToggle) {
      const original = window.themeToggle;
      window.themeToggle = function () {
        original();
        setAvatar();
      };
    }

    document.addEventListener('DOMContentLoaded', setAvatar);
  })();
</script>
